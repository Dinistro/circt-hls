#!/usr/bin/env bash

# The first argument to the script is the kernel or testbench which the Simulator
# was generated from.
# A testbench is defined as the kernel file prefixed with "tst_"

set -e
sourceDir=$(dirname $1)
basename=${1##*/}
basename=${basename%.*}

if [[ "$basename" == "tst_"* ]]; then
    basename=${basename#tst_}
fi

bash dyn_print_dot_driver.sh
@CIRCT_HLS_BINARY_DIR@/bin/hsdbg -f=dec ${basename}.dot logs/vlt_dump.vcd
